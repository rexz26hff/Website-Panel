<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panel Creator</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #0e0e0e;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      background: #1e1e1e;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(138, 43, 226, 0.3);
      width: 95%;
      max-width: 400px;
      text-align: center;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border: none;
      border-radius: 8px;
      font-size: 1em;
    }
    button {
      margin-top: 15px;
      padding: 10px;
      width: 100%;
      background-color: #8f00ff;
      color: white;
      border: none;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background-color: #a64dff;
    }
    .hidden {
      display: none;
    }
    pre {
      text-align: left;
      background: #2a2a2a;
      padding: 15px;
      border-radius: 10px;
      overflow-x: auto;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="loginBox">
      <h2>Login Panel</h2>
      <input type="text" id="username" placeholder="Username" />
      <input type="password" id="password" placeholder="Password" />
      <button onclick="login()">Login</button>
      <p id="loginStatus"></p>
    </div>

    <div id="formBox" class="hidden">
      <h2>Create Server</h2>
      <select id="plan">
        <option value="1gb">1GB</option>
        <option value="2gb">2GB</option>
        <option value="3gb">3GB</option>
        <option value="4gb">4GB</option>
        <option value="5gb">5GB</option>
        <option value="6gb">6GB</option>
        <option value="7gb">7GB</option>
        <option value="8gb">8GB</option>
        <option value="9gb">9GB</option>
        <option value="10gb">10GB</option>
        <option value="unlimited">Unlimited</option>
      </select>
      <input type="text" id="ptla" placeholder="PTLA" />
      <input type="text" id="ptlc" placeholder="PTLC" />
      <input type="text" id="domain" placeholder="Domain" />
      <button onclick="createServer()">Create</button>
      <pre id="resultBox" class="hidden"></pre>
    </div>
  </div>

  <script>
    const GITHUB_URL = "https://raw.githubusercontent.com/rexz26hff/Website-protofilio-kelas-/main/logindata.json"; // ganti sesuai repo kamu

    async function login() {
      const user = document.getElementById("username").value.trim();
      const pass = document.getElementById("password").value.trim();
      const status = document.getElementById("loginStatus");

      try {
        const res = await fetch(GITHUB_URL);
        const data = await res.json();

        const match = data.find(u => u.username === user && u.password === pass);
        if (match) {
          document.getElementById("loginBox").classList.add("hidden");
          document.getElementById("formBox").classList.remove("hidden");
        } else {
          status.innerText = "Invalid username or password.";
        }
      } catch (err) {
        status.innerText = "Login error: " + err.message;
      }
    }

    async function createServer() {
      const plan = document.getElementById("plan").value;
      const ptla = document.getElementById("ptla").value.trim();
      const ptlc = document.getElementById("ptlc").value.trim();
      const domain = document.getElementById("domain").value.trim();
      const resultBox = document.getElementById("resultBox");

      if (!ptla || !ptlc || !domain) {
        alert("Semua field wajib diisi!");
        return;
      }

      const params = new URLSearchParams({
        plan,
        ptla,
        plta: ptla,
        ptlc,
        domain,
        egg: "15",
        nestid: "5",
        loc: "1",
        username: "admin"
      });

      const apiUrl = "https://api.fandirr.my.id/panel/create-server?" + params.toString();

      try {
        const res = await fetch(apiUrl);
        const json = await res.json();
        resultBox.classList.remove("hidden");
        resultBox.innerText = JSON.stringify(json, null, 2);
      } catch (e) {
        resultBox.classList.remove("hidden");
        resultBox.innerText = "Error fetching server: " + e.message;
      }
    }
  </script>
</body>
</html>
